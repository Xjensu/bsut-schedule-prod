<h1>Управление пользователями</h1>

<table class="table">
  <thead>
    <tr>
      <th>Email</th>
      <th>Факультет</th>
      <th>Админ</th>
      <th>Суперадмин</th>
      <th>Действия</th>
    </tr>
  </thead>
  <tbody>
    <% @users.each do |user| %>
      <tr>
        <td><%= user.email %></td>
        <td>
          <% if user.super_admin? %>
            —
          <% else %>
            <%= user.faculty&.short_name || 'не назначен' %>
          <% end %>
        </td>
        <td><%= user.admin? ? 'да' : 'нет' %></td>
        <td><%= user.super_admin? ? 'да' : 'нет' %></td>
        <td>
          <%= form_with url: admin_user_path(user), method: :patch, local: true do |f| %>
            <div style="display:flex; gap:8px; align-items:center;">
              <label>
                <%= f.check_box :admin, { checked: user.admin? }, 'true', 'false' %> admin
              </label>
              <label>
                <%= f.check_box :super_admin, { checked: user.super_admin? }, 'true', 'false' %> super
              </label>
              <%= f.select :faculty_id, options_from_collection_for_select(@faculties, :id, :short_name, user.faculty_id), include_blank: '(не назначен)' %>
              <%= f.submit 'Сохранить', class: 'btn btn-primary btn-sm' %>
            </div>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
